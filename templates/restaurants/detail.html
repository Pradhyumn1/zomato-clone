{% extends 'base.html' %}

{% block title %}{{ vendor.restaurant_name }} - Zomato Clone{% endblock %}

{% block extra_css %}
<style>
    .restaurant-header {
        background: linear-gradient(135deg, #e23744 0%, #ff6b78 100%);
        color: white;
        padding: 60px 20px;
    }

    .header-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        gap: 40px;
        align-items: center;
    }

    .header-icon {
        font-size: 8em;
        background: white;
        border-radius: 20px;
        padding: 30px;
    }

    .header-info h1 {
        font-size: 3em;
        margin-bottom: 15px;
    }

    .menu-section {
        margin: 40px 0;
    }

    .menu-section h2 {
        font-size: 2em;
        margin-bottom: 25px;
        border-bottom: 3px solid #e23744;
        padding-bottom: 10px;
    }

    .menu-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }

    .menu-item {
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .menu-item-info {
        flex: 1;
    }

    .menu-item-name {
        font-weight: bold;
        font-size: 1.2em;
        margin-bottom: 5px;
    }

    .menu-item-desc {
        color: #666;
        font-size: 0.9em;
        margin-bottom: 10px;
    }

    .menu-item-price {
        color: #e23744;
        font-weight: bold;
        font-size: 1.3em;
    }

    .add-to-cart-btn {
        background: #e23744;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: background 0.3s;
    }

    .add-to-cart-btn:hover {
        background: #cb202d;
    }

    .unavailable {
        opacity: 0.5;
    }
</style>
{% endblock %}

{% block content %}
<div class="restaurant-header">
    <div class="header-content">
        <div class="header-icon">
            {% if 'Pizza' in vendor.cuisine_type %}üçï
            {% elif 'KFC' in vendor.restaurant_name %}üçó
            {% elif 'Momo' in vendor.restaurant_name %}ü•ü
            {% else %}üçΩÔ∏è{% endif %}
        </div>
        <div class="header-info">
            <h1>{{ vendor.restaurant_name }}</h1>
            <p style="font-size: 1.3em; margin-bottom: 10px;">{{ vendor.cuisine_type }}</p>
            <p style="font-size: 1.1em;">üìç {{ vendor.address }}</p>
            <p style="margin-top: 15px; font-size: 1.1em;">
                {% if vendor.is_open %}
                <span style="background: #4caf50; padding: 8px 20px; border-radius: 20px;">‚úì Open Now</span>
                {% else %}
                <span style="background: #f44336; padding: 8px 20px; border-radius: 20px;">‚úó Closed</span>
                {% endif %}
            </p>
        </div>
    </div>
</div>

<div class="container">
    <a href="{% url 'restaurant_list' %}"
        style="display: inline-block; margin: 20px 0; color: #e23744; text-decoration: none; font-weight: bold;">
        ‚Üê Back to Restaurants
    </a>

    {% for category in categories %}
    <div class="menu-section">
        <h2>{{ category.name }}</h2>
        <div class="menu-grid">
            {% for item in category.food_items.all %}
            <div class="menu-item {% if not item.is_available %}unavailable{% endif %}">
                <div class="menu-item-info">
                    <div class="menu-item-name">{{ item.name }}</div>
                    <div class="menu-item-desc">{{ item.description }}</div>
                    <div class="menu-item-price">${{ item.price }}</div>
                </div>
                {% if item.is_available %}
                {% if user.is_authenticated %}
                <form action="/api/cart/" method="POST">
                    {% csrf_token %}
                    <button type="submit" class="add-to-cart-btn">Add +</button>
                </form>
                {% else %}
                <a href="{% url 'login' %}" class="add-to-cart-btn" style="text-decoration: none;">Login to Order</a>
                {% endif %}
                {% else %}
                <span style="color: #999; font-weight: bold;">Unavailable</span>
                {% endif %}
            </div>
            {% empty %}
            <p style="color: #666;">No items available in this category</p>
            {% endfor %}
        </div>
    </div>
    {% empty %}
    <div style="text-align: center; padding: 60px; color: #666;">
        <h2>No menu available yet</h2>
        <p>Check back later!</p>
    </div>
    {% endfor %}
</div>
{% endblock %}